(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{108:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=a.a.createContext({}),u=function(e){var t=a.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=u(e.components);return a.a.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,o=l(e,["components","mdxType","originalType","parentName"]),p=u(n),b=r,m=p["".concat(s,".").concat(b)]||p[b]||d[b]||i;return n?a.a.createElement(m,c(c({ref:t},o),{},{components:n})):a.a.createElement(m,c({ref:t},o))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=b;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,s[1]=c;for(var o=2;o<i;o++)s[o]=n[o];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},84:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return u}));var r=n(3),a=n(7),i=(n(0),n(108)),s={title:"Mise en place de l'environnement",slug:"/setup"},c={unversionedId:"StackTech/Setup",id:"StackTech/Setup",isDocsHomePage:!1,title:"Mise en place de l'environnement",description:"Pr\xeat \xe0 mettre en place l'environnement Create React App (Appeler CRA dans la suite) TypeScript (Appeler Ts dans la suite) + Serveur TypeScript ?",source:"@site/docs/StackTech/Setup.md",slug:"/setup",permalink:"/UnlabeledProject/docs/setup",editUrl:"https://github.com/batleforc/UnlabeledProject/edit/doc/docs/StackTech/Setup.md",version:"current",sidebar:"docs",previous:{title:"Electron",permalink:"/UnlabeledProject/docs/electron"},next:{title:"Pipeline",permalink:"/UnlabeledProject/docs/pipeline"}},l=[{value:"1. Mise en place du client",id:"1-mise-en-place-du-client",children:[]},{value:"2. Mise en place serveur (Koa + Socket.io)",id:"2-mise-en-place-serveur-koa--socketio",children:[]},{value:"3. Mise en place de Craco et TailwindCSS",id:"3-mise-en-place-de-craco-et-tailwindcss",children:[]},{value:"Pourquoi ?",id:"pourquoi-",children:[]}],o={toc:l};function u(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},o,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Pr\xeat \xe0 mettre en place l'environnement Create React App (Appeler CRA dans la suite) TypeScript (Appeler Ts dans la suite) + Serveur TypeScript ?"),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"  Vous souhaitez retrouver la stack que je vous fait installer ici ? ",Object(i.b)("a",{parentName:"p",href:"/docs/stacktechnique"},"elle est disponible dans la page StackTech")))),Object(i.b)("h3",{id:"1-mise-en-place-du-client"},"1. Mise en place du client"),Object(i.b)("h4",{id:"11-mise-en-place-de-cra"},"1.1. Mise en place de CRA"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"  yarn create react-app ${Le nom de votre projet} --template typescript\n")),Object(i.b)("p",null,"Cette commande vous permettra d'initialiser votre projet Create-React-App."),Object(i.b)("h4",{id:"12-mise-en-place-des-packages"},"1.2. Mise en place des Packages"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"  yarn add @reduxjs/toolkit axios react-redux redux react-router-dom\n  yarn add @types/redux @types/react-redux @types/react-router-dom -d\n")),Object(i.b)("p",null,"Ici vous avez ajout\xe9 les packages n\xe9cessaires \xe0 la cr\xe9ation de l'application:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"redux : Vous permet de g\xe9rer l'\xe9tat global de l'application."),Object(i.b)("li",{parentName:"ul"},"axios : Vous permet de faire des requ\xeates web."),Object(i.b)("li",{parentName:"ul"},"react-router-dom : Permet de g\xe9rer un syst\xe8me de chemin.")),Object(i.b)("p",null,"D'autres packages sont utilis\xe9s :"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"react-grid-layout : Permet la gestion de tableau dynamique (Utiliser dans l'interface de la soundboard)"),Object(i.b)("li",{parentName:"ul"},"socket.io-client : Permet d'\xe9couter et lancer des events en temps r\xe9el."),Object(i.b)("li",{parentName:"ul"},"D'autres packages, dont l'installation est plus compliqu\xe9e, sont expliqu\xe9s plus bas.")),Object(i.b)("h3",{id:"2-mise-en-place-serveur-koa--socketio"},"2. Mise en place serveur (Koa + Socket.io)"),Object(i.b)("h4",{id:"21-package"},"2.1. Package"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"  yarn add @koa/cors @koa/router koa koa-body koa-mount koa-static socket.io typescript nodemon concurrently cross-env dotenv-flow\n  yarn add @types/koa @types/koa-bodyparser @types/koa-cors @types/koa-json @types/koa-router @types/koa-static @types/node @types/socket.io -d\n")),Object(i.b)("p",null,"Les packages n\xe9cessaires aux d\xe9veloppement sont ajout\xe9s ainsi que leur type."),Object(i.b)("h4",{id:"22-configuration"},"2.2 Configuration"),Object(i.b)("p",null,"Afin de cr\xe9er une configuration compl\xe9te il est n\xe9cessaire de cr\xe9er quelques fichiers et dossiers."),Object(i.b)("p",null,"Commencer par cr\xe9er \xe0 la racine un dossier Server puis place \xe0 la configuration Ts."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json",metastring:'title="/serveur.tsconfig.json"',title:'"/serveur.tsconfig.json"'},'  {\n  "compilerOptions": {\n    "module": "commonjs",\n    "esModuleInterop": true,\n    "outDir": "BuildServer", // Fichier de destination du code compil\xe9.\n    "target": "es6", // La version de JavaScript vis\xe9e.\n    "strict": true, // Activation de toutes les verifications strictes li\xe9es aux Ts.\n    "allowJs":true,\n    "skipLibCheck":true // Permet de r\xe9soudre les cas o\xf9 deux Lib ont le m\xeame type.\n  },\n  "include": [\n    "Server/**/*" // Le dossier contenant le code source du serveur.\n  ]\n}\n')),Object(i.b)("p",null,"Ce fichier est la configuration typescript appliqu\xe9e \xe0 votre serveur."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n  ...Votre Package.json\n  "scripts":{\n    "S:Build":"tsc -w --projet ./serveur.tsconfig.json",\n    "S:ProdBuild":"cross-env NODE_ENV=production tsc --project ./serveur.tsconfig.json",\n    "S:Watch": "nodemon -q -w BuildServer BuildServer/index.js",\n    "S:DevWatch": "cross-env NODE_ENV=development concurrently --names \\"S:Build,S:Watch\\" -c \\"grey.bold,blue.bold\\" \\"yarn:S:Build\\" \\"yarn:S:Watch\\" --node-env=development",\n  }\n}\n')),Object(i.b)("p",null,"=> S:Build : Int\xe9rpr\xe9tation du code en TypeScript vers JavaScript en temps r\xe9el (Le code interpr\xe9t\xe9 \xe0 nouveau \xe0 chaques sauvegardes)."),Object(i.b)("p",null,"=> S:ProdBuild : Interpr\xe9tation du code pour la production."),Object(i.b)("p",null,"=> S:Watch : Ex\xe9cution du code du dossier BuildServer."),Object(i.b)("p",null,"=> S:DevWatch : Ex\xe9cution en parall\xe8le du build server ainsi que de l'ex\xe9cuteur serveur."),Object(i.b)("h4",{id:"23-les-autres-paquets"},"2.3 Les autres paquets"),Object(i.b)("p",null,"D'autres packets sont utilis\xe9s pour la partie serveur tel que :"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Discordjs : Interface avec discord. Facilite fortement le d\xe9veloppement de bot."),Object(i.b)("li",{parentName:"ul"},"sqlite && sqlite3 : Framework permettant l'utilisation d'une base de donn\xe9e."),Object(i.b)("li",{parentName:"ul"},"nconf : Permet l'utilisation de configuration .json, les chemins vers les bases de donn\xe9e ou autre sont sauvegard\xe9e de cette mani\xe8re."),Object(i.b)("li",{parentName:"ul"},"chalk : Permet la coloration du terminal.")),Object(i.b)("p",null,"Certains paquets sont utilis\xe9s pour la partie vocal de DiscordJs:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Sodium"),Object(i.b)("li",{parentName:"ul"},"utf-8-validate"),Object(i.b)("li",{parentName:"ul"},"opusscript"),Object(i.b)("li",{parentName:"ul"},"ffmpeg-static"),Object(i.b)("li",{parentName:"ul"},"bufferutil")),Object(i.b)("p",null,"Tous ces paquets sont utilis\xe9s afin de fluidifier les flux audios ainsi que permettre leur lecture."),Object(i.b)("p",null,"Un autre paquet est utilis\xe9 pour la lecture de vid\xe9o youtube : ytdl-code"),Object(i.b)("h3",{id:"3-mise-en-place-de-craco-et-tailwindcss"},"3. Mise en place de Craco et TailwindCSS"),Object(i.b)("p",null,"Create React App Configuration Override (Craco) est un package qui permet de modifier le package react-script."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"  yarn add @craco/craco\n")),Object(i.b)("p",null,"Puis cr\xe9er un fichier correspondant \xe0 la configuration de craco:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-js",metastring:'title="/craco.config.js"',title:'"/craco.config.js"'},"module.exports = {\n  style: {\n    postcss: {\n      plugins: [\n        require('tailwindcss'),\n        require('autoprefixer'),\n      ],\n    },\n  },\n}\n")),Object(i.b)("p",null,'Pour appliquer la configuration de craco : penser \xe0 modifier votre package.json et remplacer les "react-scripts" par craco.'),Object(i.b)("p",null,"La prochaine \xe9tape consiste \xe0 g\xe9n\xe9rer puis modifier la configuration de Tailwind, Tailwind est un framework Css complet (et non pas une biblioth\xe8que de composant)."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"  npx tailwindcss init\n")),Object(i.b)("p",null,"Cette commande vous permettra d'installer tailwindcss. Il ne vous reste plus qu'\xe0 modifier la configuration pour lui indiquer o\xf9 se situe le code source, puis d'ajouter les mots clefs pour int\xe9grer le css dans un de vos fichiers .css :"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-js",metastring:'title="/tailwind.config.js"',title:'"/tailwind.config.js"'},"module.exports ={\n  purge: ['./src/**/*.{js,jsx,ts,tsx}', './public/index.html'],\n}\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-css",metastring:'title="Votre fichier en .css"',title:'"Votre',fichier:!0,en:!0,'.css"':!0},"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n... Vos style css\n")),Object(i.b)("h3",{id:"pourquoi-"},"Pourquoi ?"),Object(i.b)("h4",{id:"tailwind"},"Tailwind"),Object(i.b)("p",null,"J'ai choisis Tailwind en raison des diff\xe9rences entre les librairies que j'utilisais avant (et je ne retournerais plus en arri\xe8re). Par le pass\xe9e j'utilisais ",Object(i.b)("a",{parentName:"p",href:"https://material-ui.com/"},"Material-ui"),", qui en plus d'\xeatre lourd poss\xe8de un grand nombre de fonctionnalit\xe9 cach\xe9es. Oui j'ai choisis de r\xe9inventer la roue pour pas mal de fonctionnalit\xe9s mais conna\xeetre les tenants et les aboutissants de celle-ci m'a \xe9t\xe9 extr\xeamement b\xe9n\xe9fique."),Object(i.b)("h4",{id:"koa"},"Koa"),Object(i.b)("p",null,"Ancien utilisateur d'Express, je souhaitais apprendre \xe0 utiliser de nouveaux frameworks/packets pour la gestion web."),Object(i.b)("p",null,"Koa est plus long \xe0 mettre en place mais me parais plus robuste sur le long terme."),Object(i.b)("h4",{id:"socketio"},"Socket.io"),Object(i.b)("p",null,"Avec un syst\xe8me comme Discordjs qui est utilis\xe9 beaucoup d'event et d'action asynchrone sont effectu\xe9es. Une mise \xe0 jour de l'interface en temps r\xe9el est donc devenue obligatoire et un fonctionnement ou socket.io ainsi que Redux sont en harmonie et devenue tr\xe8s agr\xe9able \xe0 utiliser."),Object(i.b)("h4",{id:"typescript"},"TypeScript"),Object(i.b)("p",null,"TypeScript, ni plus ni moins qu'un javascript typer, de la rigueur dans le respect des types, des interfaces. Je n'ai pas \xe9t\xe9 jusqu'au bout de ce qu'est capable de m'offrir le typescript. Cependant cette premi\xe9re exp\xe9rience me rend confiant, malgr\xe9 la mauvaise image que les untilisateurs ont du Js, celle-ci peut tr\xe8s bien d\xe9passer cette derni\xe8re."),Object(i.b)("p",null,"Un point important et qui m'a beaucoup fait rire (car oui, passer 3h \xe0 faire du bug fix et r\xe9aliser que le type utilis\xe9 pour une variable n'est pas la bonne m'est arriv\xe9.) est qu'il est n\xe9cessaire d'installer les packest en \"@types\" mais il faut faire attention, certains packets fournissent ces types directement."))}u.isMDXComponent=!0}}]);