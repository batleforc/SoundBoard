(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{88:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return l})),t.d(n,"toc",(function(){return c})),t.d(n,"default",(function(){return u}));var i=t(3),r=t(7),a=(t(0),t(111)),o={title:"Electron",slug:"/electron"},l={unversionedId:"StackTech/electron",id:"StackTech/electron",isDocsHomePage:!1,title:"Electron",description:"KEZAKO ?",source:"@site/docs/StackTech/electron.md",slug:"/electron",permalink:"/UnlabeledProject/docs/electron",editUrl:"https://github.com/batleforc/UnlabeledProject/edit/doc/docs/StackTech/electron.md",version:"current",sidebar:"docs",previous:{title:"Stach technique",permalink:"/UnlabeledProject/docs/stacktechnique"},next:{title:"Mise en place de l'environnement",permalink:"/UnlabeledProject/docs/setup"}},c=[{value:"Mise en place d&#39;un environnement de dev",id:"mise-en-place-dun-environnement-de-dev",children:[{value:"1. Installation des packages",id:"1-installation-des-packages",children:[]},{value:"2. Un peu de configuration",id:"2-un-peu-de-configuration",children:[]},{value:"3. Ajout des script",id:"3-ajout-des-script",children:[]},{value:"4. electron.js",id:"4-electronjs",children:[]},{value:"How It Work",id:"how-it-work",children:[]}]}],s={toc:c};function u(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(i.a)({},s,t,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,"KEZAKO ?"),Object(a.b)("p",null,"Cette partie d'atome est un framework permettant de d\xe9velopper des application desktop multi-plateformes a partir de JavaScript/Html/CSS."),Object(a.b)("p",null,'Le processus de d\xe9veloppement est "Simple".'),Object(a.b)("h2",{id:"mise-en-place-dun-environnement-de-dev"},"Mise en place d'un environnement de dev"),Object(a.b)("div",{className:"admonition admonition-info alert alert--info"},Object(a.b)("div",{parentName:"div",className:"admonition-heading"},Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",{parentName:"h5",className:"admonition-icon"},Object(a.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(a.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(a.b)("div",{parentName:"div",className:"admonition-content"},Object(a.b)("p",{parentName:"div"},"Pour la suite de cette page je part du principe qu'on ajoute la stack electron sur un proj\xe9t d\xe9ja existant, dans une autre doc j'explique la mise en place de mon environnement post electron."),Object(a.b)("p",{parentName:"div"},"L'environnement ",Object(a.b)("a",{parentName:"p",href:"/docs/setup"},"pr\xe9-electron est disponible ici")))),Object(a.b)("h3",{id:"1-installation-des-packages"},"1. Installation des packages"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},"  yarn add electron electron-builder wait-on concurrently electron-is-dev\n")),Object(a.b)("p",null,"Electron permet de lancer la solution sans build la solution compl\xe9te."),Object(a.b)("p",null,"Electron-Builder permet de compiler la solution."),Object(a.b)("p",null,"Wait-On permet d'attendre une r\xe9ponse d'une url sp\xe9cifique pour ici continuer le processus."),Object(a.b)("p",null,"Concurrently permet de lancer plusieurs commande aux m\xeame moment."),Object(a.b)("h3",{id:"2-un-peu-de-configuration"},"2. Un peu de configuration"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-json",metastring:'title="package.json"',title:'"package.json"'},'{\n  ... le reste de votre package.json\n  "main": "./build/electron.js",\n  "build": {\n    "productName": "unlabeledProject",\n    "appId": "com.example.unlabeledProject",\n    "icon": "build/toolbox.png",\n    "asar": true,\n    "files": [\n      "package.json",\n      "build/**/*",\n      "node_modules/**/*",\n      "BuildServer/**/*"\n    ]\n  },\n}\n')),Object(a.b)("p",null,"Toute ces ligne sont vraiment n\xe9cessaire ?"),Object(a.b)("p",null,"Dans notre cas oui mais je suis la pour vous les expliquer:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"main : L'emplacement de votre fichier electron.js, celui ci est le point d'entrer de votre application (imaginer cliquer sur ce fichier quand vous lancer la solution finale ou uniquement en dev)"),Object(a.b)("li",{parentName:"ul"},"build:",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"productName : Le nom de votre produit (sera utiliser pour la compilation de votre ex\xe9cutable)"),Object(a.b)("li",{parentName:"ul"},"appId : Id Linux/Apple, cette id permet de reconna\xeetre le package."),Object(a.b)("li",{parentName:"ul"},"icon : L'icon utiliser pour vos ex\xe9cutable (penser a bien importer le dossier ou il est dans les fichier)"),Object(a.b)("li",{parentName:"ul"},"asar : Si vous utiliser le format asar pour vos fichier compresser. th\xe9oriquement il acc\xe9l\xe9r\xe9 les require."),Object(a.b)("li",{parentName:"ul"},"files: Tout les fichier/dossier inclut dans le package finale, penser a include le node_modules, vos ou votre dossier de source ainsi que votre icon (ici build contient le client ainsi que l'icon)")))),Object(a.b)("h3",{id:"3-ajout-des-script"},"3. Ajout des script"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-json",metastring:'title="package.json"',title:'"package.json"'},'{\n  ... le reste de votre package.json\n  "scripts":{\n    "start":"VOTRE SCRIPT DE STARTUP",\n    "build":"VOTRE SCRIPT DE BUILD",\n    "postinstall": "electron-builder install-app-deps",\n    "electronDev": "concurrently \\"yarn start\\" \\"wait-on http://localhost:3000 && electron .\\"",\n    "electronAlone":"electron .",\n    "ebuild": "yarn run build && node_modules/.bin/build",\n    "electron-pack": "build --em.main=build/electron.js",\n    "pack": "electron-builder --dir",\n    "dist": "electron-builder",\n    "distStartup":"yarn build && yarn dist"\n  }\n}\n')),Object(a.b)("p",null,"Pour le bon fonctionnement de la solution TOUT ces script sont n\xe9cessaire:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"postinstall : Est ex\xe9cuter apres l'installation d'un package, il permet de re-construire les extension dans un format propice a l'utilisation electron."),Object(a.b)("li",{parentName:"ul"},"electronDev : Permet de lancer votre environnement de dev via start puis d'attendre que celui ci sois lancer pour lancer le client electron."),Object(a.b)("li",{parentName:"ul"},"electronAlone : Dans beaucoup de cas j'ai eu a modifier uniquement la partie electron, afin d'acc\xe9l\xe9rer les start/restart je lan\xe7ais une fois unique start puis relan\xe7ais uniquement la partie electron."),Object(a.b)("li",{parentName:"ul"},"pack : Permet d'obtenir uniquement le dossier contenant la solution compiler."),Object(a.b)("li",{parentName:"ul"},"dist : Permet via la configuration de l'\xe9tape 2 de compiler vos fichier (par d\xe9fault .snap pour linux, .exe pour windows et .appImage pour mac)"),Object(a.b)("li",{parentName:"ul"},"distStartup : Permet en une commande de build les composant ainsi que le client electron.")),Object(a.b)("h3",{id:"4-electronjs"},"4. electron.js"),Object(a.b)("p",null,"Je vous fournis une version simplifier de mon fichier electronJs les commentaire sont int\xe9grer dans le code fournis, si vous souhaitez mettre en place un syst\xe8me plus complet avec un icon tray, veuillez a vous r\xe9f\xe9rer a mon code."),Object(a.b)("p",null,"Le code electron.js est placer dans mon dossier public afin d'\xe9viter que celui ci sois modifier, ne compter pas sur du TypeScript pour celui ci."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-js",metastring:'title="/public/electron.js"',title:'"/public/electron.js"'},'  const electron = require("electron");\n  const { app, BrowserWindow } = electron;\n  const isDev = require("electron-is-dev");\n  const Server = require(\'../BuildServer/index\') // permet de lancer le serveur aux d\xe9marrage\n  const path = require("path");\n  let mainWindow;\n  const BaseFolder = path.join(__dirname);\n  const icon = path.join(BaseFolder,"toolbox.png");\n\n  const createWindow = ({showOnLoad = true}={}) => {\n    if(mainWindow){\n      mainWindow.focus();\n      return;\n    }\n    mainWindow = new BrowserWindow({\n      width: 1280, // Permet de d\xe9finir la taille de la fen\xeatre\n      height: 720,\n      autoHideMenuBar : true, // Permet de cacher la barre de menu int\xe9grer a electron\n      icon : icon // L\'icon de la fen\xeatre \xe9lectron\n    });\n    mainWindow.loadURL(\n      isDev ?\n        "http://localhost:3000" : // Le serveur de dev local\n        "http://localhost:5000"   // Le serveur de production\n    )\n    mainWindow.once("ready-to-show",()=>{\n      if(showOnLoad) mainWindow.show(); //si on veux montrer la fen\xeatre aux d\xe9marrage\n    })\n    mainWindow.once("closed", () => (mainWindow = null)); // si la fen\xeatre est fermer on vide mainWindow\n  }\n\n  const init = () => {\n    app.on("window-all-closed", (e) => e.preventDefault()); // evite que toute la solution sois fermer si toute les fen\xeatre sont fermer.\n  };\n  app.requestSingleInstanceLock() ? init() : app.quit(); // Evite d\'avoir deux fois le serveur d\xe9marrer\n  app.on("second-instance", () => mainWindow.show()); // montre la fen\xeatre si la solution est d\xe9marrer deux fois\n\n  app.on("ready",()=>{\n    if (mainWindow === null) {\n      createWindow(); // si aucune fen\xeatre en cr\xe9er une.\n    }\n  })\n\n  app.on("activate", () => {\n    if (mainWindow === null) {\n      createWindow(); // si aucune fen\xeatre en cr\xe9er une.\n    }\n  });\n')),Object(a.b)("h3",{id:"how-it-work"},"How It Work"),Object(a.b)("img",{src:"https://www.plantuml.com/plantuml/png/TP2z2W8n48Hxds8u2wiJrCv24B4JBIp58iOz38QDv99J45_8r_35N7_kJkKiKkomtsHc0QM3yuWv-HR0RakOMjB1EyPPbBUs95zGzBKmiOOuo7oHzw2HndHKiqFqkZF5cc0LScTZC8vbzMs4TDNUMANtQu5UNe9CJmUN2q7GZWDn9EH11QF_WALMavtnmSXo5IFzskgNaSItAjHa_56Z8TEHDhz_F2ymnA2xY8KdH2PanBTha26PIuM24gWiCtgdfEh3xLdw3W00",alt:null}),Object(a.b)("p",null,"Lors du d\xe9marrage de notre solution notre electron va d\xe9marrer notre serveur web, celui ci int\xe8gre une partie statique qui n'est autre que notre client ainsi qu'une partie Api."),Object(a.b)("h4",{id:"pourquoi-electron-et-pas-react-native"},"Pourquoi Electron et pas React-Native"),Object(a.b)("p",null,"React native et Electron n'ont pas le m\xeame objectif."),Object(a.b)("p",null,"React native vise les appareille Android et Ios contrairement a Electron qui vise les Ordinateur."))}u.isMDXComponent=!0}}]);